set default_storage_engine=myisam;
SET TIME_ZONE = "+00:00";
SET sql_mode = 'NO_ENGINE_SUBSTITUTION';
CREATE TABLE t1( a BIT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a TINYINT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a SMALLINT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a MEDIUMINT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a INT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a BIGINT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a FLOAT DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a DECIMAL DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a DATE DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a TIME DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a YEAR DEFAULT CURRENT_TIMESTAMP );
CREATE TABLE t1( a BIT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a TINYINT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a SMALLINT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a MEDIUMINT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a INT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a BIGINT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a FLOAT ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a DECIMAL ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a DATE ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a TIME ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1( a YEAR ON UPDATE CURRENT_TIMESTAMP );
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, b TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, c TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, d TIMESTAMP NULL, e DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, f DATETIME DEFAULT CURRENT_TIMESTAMP, g DATETIME ON UPDATE CURRENT_TIMESTAMP, h DATETIME );
SET TIMESTAMP = 1317132668.654321;
SET @old_time_zone = @@TIME_ZONE;
SET TIME_ZONE = "+05:00";
INSERT INTO t1( d, h ) VALUES ( NOW(), NOW() );
SELECT * FROM t1;
SET TIMESTAMP = 611017323.543212;
UPDATE t1 SET d = NOW(), h = NOW();
SELECT * FROM t1;
SET TIME_ZONE = @old_time_zone;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, b TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, c TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, d TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, e TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, f INT );
SET TIMESTAMP = 1303197722.534231;
INSERT INTO t1 ( f ) VALUES (1);
SELECT * FROM t1;
SET TIMESTAMP = 1303197798.132435;
UPDATE t1 SET f = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, c TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, d TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, e TIMESTAMP NULL, f DATETIME, g DATETIME DEFAULT CURRENT_TIMESTAMP, h DATETIME ON UPDATE CURRENT_TIMESTAMP, i DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, j INT );
SET TIMESTAMP = 1303197722.534231;
INSERT INTO t1 ( j, a ) VALUES ( 1, 1 );
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b INT, c TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, d TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, e TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, f TIMESTAMP NOT NULL DEFAULT '1986-09-27 03:00:00.098765', g TIMESTAMP NULL, h DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, i DATETIME DEFAULT CURRENT_TIMESTAMP, j DATETIME ON UPDATE CURRENT_TIMESTAMP, k DATETIME NULL, l DATETIME DEFAULT '1986-09-27 03:00:00.098765' );
SET TIMESTAMP = 251593200.192837;
INSERT INTO t1(a) VALUES (1) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
SET TIMESTAMP = 169945200.918273;
INSERT INTO t1(a) VALUES (1) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
SET TIMESTAMP = 114167482.534231;
INSERT INTO t1(a) VALUES (2) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b INT, c TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP );
SET TIMESTAMP = 1303197798.945156;
INSERT INTO t1 VALUES (1, 0, '2001-01-01 01:01:01.111111'), (2, 0, '2002-02-02 02:02:02.222222'), (3, 0, '2003-03-03 03:03:03.333333');
SELECT * FROM t1;
UPDATE t1 SET b = 2, c = c WHERE a = 2;
SELECT * FROM t1;
INSERT INTO t1 (a) VALUES (4);
SELECT * FROM t1;
UPDATE t1 SET c = '2004-04-04 04:04:04.444444' WHERE a = 4;
SELECT * FROM t1;
INSERT INTO t1 ( a ) VALUES ( 3 ), ( 5 ) ON DUPLICATE KEY UPDATE b = 3, c = c;
SELECT * FROM t1;
INSERT INTO t1 (a, c) VALUES (4, '2004-04-04 00:00:00.444444'), (6, '2006-06-06 06:06:06.666666') ON DUPLICATE KEY UPDATE b = 4;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, c DATETIME  DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, d TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, e DATETIME  DEFAULT CURRENT_TIMESTAMP, f TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, g DATETIME  ON UPDATE CURRENT_TIMESTAMP, h TIMESTAMP NULL, i DATETIME );
SET TIMESTAMP = 22756272.163584;
REPLACE INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
SET TIMESTAMP = 27094577.852954;
REPLACE INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, b DATETIME DEFAULT CURRENT_TIMESTAMP, c INT );
SET TIMESTAMP = 1303293221.163578;
INSERT INTO t1 VALUES (NULL, NULL, 1), (DEFAULT, DEFAULT, 2);
INSERT INTO t1 ( a, b, c ) VALUES (NULL, NULL, 3), (DEFAULT, DEFAULT, 4);
SELECT * FROM t1;
SET TIME_ZONE = "+03:00";
SELECT * FROM t1;
SET TIME_ZONE = "+00:00";
DROP TABLE t1;
SET TIMESTAMP = 1303283139.195624;
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT '2010-10-11 12:34:56' ON UPDATE CURRENT_TIMESTAMP, b DATETIME DEFAULT '2010-10-11 12:34:56' );
INSERT INTO t1          VALUES (NULL, NULL), (DEFAULT, DEFAULT);
INSERT INTO t1 ( a, b ) VALUES (NULL, NULL), (DEFAULT, DEFAULT);
SELECT * FROM t1;
DROP TABLE t1;
SET TIMESTAMP = 1303293221.136952;
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, b TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, c TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, d TIMESTAMP NOT NULL DEFAULT '1986-09-27 03:00:00.098765', e TIMESTAMP NULL, f DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, g DATETIME DEFAULT CURRENT_TIMESTAMP, h DATETIME ON UPDATE CURRENT_TIMESTAMP, i DATETIME NULL, j DATETIME DEFAULT '1986-09-27 03:00:00.098765' );
INSERT INTO t1 VALUES ();
INSERT INTO t1 SELECT NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, b DATETIME DEFAULT CURRENT_TIMESTAMP, c INT );
INSERT INTO t1 ( c ) VALUES (1);
SELECT * FROM t1;
SET TIMESTAMP = 1303311973.163587;
UPDATE t1 t11, t1 t12 SET t11.c = 1;
SELECT * FROM t1;
UPDATE t1 t11, t1 t12 SET t11.c = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, b TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, c DATETIME  DEFAULT   CURRENT_TIMESTAMP, d DATETIME  ON UPDATE CURRENT_TIMESTAMP, e INT );
CREATE TABLE t2 ( f INT, g DATETIME  ON UPDATE CURRENT_TIMESTAMP, h DATETIME  DEFAULT   CURRENT_TIMESTAMP, i TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP, j TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP );
SET TIMESTAMP = 794880123.195676;
INSERT INTO t1 ( e ) VALUES ( 1 ), ( 2 );
INSERT INTO t2 ( f ) VALUES ( 1 ), ( 2 );
SELECT * FROM t1;
SELECT * FROM t2;
SET TIMESTAMP = 345520921.196755;
UPDATE t1, t2 SET t1.e = 3, t2.f = 4;
