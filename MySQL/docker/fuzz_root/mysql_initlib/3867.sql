SET @previous_binlog_format__htnt542nh=@@GLOBAL.binlog_format;
SET @@GLOBAL.binlog_format=STATEMENT;
SET binlog_format=STATEMENT;
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
CREATE TABLE t1 ( id SMALLINT NOT NULL, PRIMARY KEY (id) ) ENGINE=innodb PARTITION BY RANGE (id) ( PARTITION p1 VALUES LESS THAN (2), PARTITION p2 VALUES LESS THAN (4), PARTITION p3 VALUES LESS THAN (10) );
INSERT INTO t1 VALUES (1),(2),(3);
FLUSH TABLES;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
BEGIN;
SELECT * FROM t1;
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
BEGIN;
INSERT INTO t1 VALUES(7);
COMMIT;
COMMIT;
FLUSH TABLES;
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
BEGIN;
SELECT * FROM t1;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
BEGIN;
INSERT INTO t1 VALUES(9);
COMMIT;
COMMIT;
DROP TABLE t1;
SET @@GLOBAL.binlog_format=@previous_binlog_format__htnt542nh;
