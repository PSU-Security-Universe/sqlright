CREATE TABLE t1 ( id int NOT NULL auto_increment PRIMARY KEY, b int NOT NULL, c datetime NOT NULL, INDEX idx_b(b), INDEX idx_c(c) ) ENGINE=InnoDB;
CREATE TABLE t2 ( b int NOT NULL auto_increment PRIMARY KEY, c datetime NOT NULL ) ENGINE= InnoDB;
INSERT INTO t2(c) VALUES ('2007-01-01');
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t2(c) SELECT c FROM t2;
INSERT INTO t1(b,c) SELECT b,c FROM t2;
UPDATE t2 SET c='2007-01-02';
INSERT INTO t1(b,c) SELECT b,c FROM t2;
UPDATE t2 SET c='2007-01-03';
INSERT INTO t1(b,c) SELECT b,c FROM t2;
ANALYZE TABLE t1;
ANALYZE TABLE t2;
set @@sort_buffer_size=8192;
SELECT COUNT(*) FROM t1;
EXPLAIN SELECT COUNT(*) FROM t1 FORCE INDEX(idx_b, idx_c) WHERE (c >= '2007-01-02' AND c <= '2007-01-03') OR b >= 1;
SELECT COUNT(*) FROM t1 FORCE INDEX(idx_b, idx_c) WHERE (c >= '2007-01-02' AND c <= '2007-01-03') OR b >= 1;
set @@sort_buffer_size=default;
DROP TABLE t1,t2;
set optimizer_switch='semijoin=off';
set optimizer_switch='materialization=off';
CREATE TABLE t1 (topic BIGINT NOT NULL DEFAULT 0);
INSERT INTO t1 (topic) VALUES(1370);
INSERT INTO t1 (topic) VALUES(1369);
INSERT INTO t1 (topic) VALUES(1368);
INSERT INTO t1 (topic) VALUES(1367);
INSERT INTO t1 (topic) VALUES(1366);
INSERT INTO t1 (topic) VALUES(1365);
INSERT INTO t1 (topic) VALUES(1364);
INSERT INTO t1 (topic) VALUES(1363);
INSERT INTO t1 (topic) VALUES(1362);
INSERT INTO t1 (topic) VALUES(1361);
INSERT INTO t1 (topic) VALUES(1360);
INSERT INTO t1 (topic) VALUES(1359);
INSERT INTO t1 (topic) VALUES(1358);
INSERT INTO t1 (topic) VALUES(1357);
INSERT INTO t1 (topic) VALUES(1356);
INSERT INTO t1 (topic) VALUES(1355);
INSERT INTO t1 (topic) VALUES(1354);
INSERT INTO t1 (topic) VALUES(1353);
INSERT INTO t1 (topic) VALUES(1352);
INSERT INTO t1 (topic) VALUES(1351);
INSERT INTO t1 (topic) VALUES(1350);
INSERT INTO t1 (topic) VALUES(1349);
INSERT INTO t1 (topic) VALUES(1348);
INSERT INTO t1 (topic) VALUES(1347);
INSERT INTO t1 (topic) VALUES(1346);
INSERT INTO t1 (topic) VALUES(1345);
INSERT INTO t1 (topic) VALUES(1344);
INSERT INTO t1 (topic) VALUES(1343);
INSERT INTO t1 (topic) VALUES(1342);
INSERT INTO t1 (topic) VALUES(1341);
INSERT INTO t1 (topic) VALUES(1340);
INSERT INTO t1 (topic) VALUES(1339);
INSERT INTO t1 (topic) VALUES(1338);
INSERT INTO t1 (topic) VALUES(1337);
INSERT INTO t1 (topic) VALUES(1336);
INSERT INTO t1 (topic) VALUES(1335);
INSERT INTO t1 (topic) VALUES(1334);
INSERT INTO t1 (topic) VALUES(1333);
INSERT INTO t1 (topic) VALUES(1332);
INSERT INTO t1 (topic) VALUES(1331);
INSERT INTO t1 (topic) VALUES(1330);
INSERT INTO t1 (topic) VALUES(1329);
INSERT INTO t1 (topic) VALUES(1328);
INSERT INTO t1 (topic) VALUES(1327);
INSERT INTO t1 (topic) VALUES(1326);
INSERT INTO t1 (topic) VALUES(1325);
INSERT INTO t1 (topic) VALUES(1324);
INSERT INTO t1 (topic) VALUES(1323);
INSERT INTO t1 (topic) VALUES(1322);
INSERT INTO t1 (topic) VALUES(1321);
INSERT INTO t1 (topic) VALUES(1320);
INSERT INTO t1 (topic) VALUES(1319);
INSERT INTO t1 (topic) VALUES(1318);
INSERT INTO t1 (topic) VALUES(1317);
INSERT INTO t1 (topic) VALUES(1316);
INSERT INTO t1 (topic) VALUES(1315);
INSERT INTO t1 (topic) VALUES(1314);
INSERT INTO t1 (topic) VALUES(1313);
INSERT INTO t1 (topic) VALUES(1312);
INSERT INTO t1 (topic) VALUES(1311);
INSERT INTO t1 (topic) VALUES(1310);
INSERT INTO t1 (topic) VALUES(1309);
INSERT INTO t1 (topic) VALUES(1308);
INSERT INTO t1 (topic) VALUES(1307);
INSERT INTO t1 (topic) VALUES(1306);
INSERT INTO t1 (topic) VALUES(1305);
INSERT INTO t1 (topic) VALUES(1304);
INSERT INTO t1 (topic) VALUES(1303);
INSERT INTO t1 (topic) VALUES(1302);
INSERT INTO t1 (topic) VALUES(1301);
INSERT INTO t1 (topic) VALUES(1300);
INSERT INTO t1 (topic) VALUES(1299);
INSERT INTO t1 (topic) VALUES(1298);
INSERT INTO t1 (topic) VALUES(1297);
INSERT INTO t1 (topic) VALUES(1296);
INSERT INTO t1 (topic) VALUES(1295);
INSERT INTO t1 (topic) VALUES(1294);
INSERT INTO t1 (topic) VALUES(1293);
INSERT INTO t1 (topic) VALUES(1292);
INSERT INTO t1 (topic) VALUES(1291);
INSERT INTO t1 (topic) VALUES(1290);
INSERT INTO t1 (topic) VALUES(1289);
INSERT INTO t1 (topic) VALUES(1288);
INSERT INTO t1 (topic) VALUES(1287);
INSERT INTO t1 (topic) VALUES(1286);
INSERT INTO t1 (topic) VALUES(1285);
INSERT INTO t1 (topic) VALUES(1284);
INSERT INTO t1 (topic) VALUES(1283);
INSERT INTO t1 (topic) VALUES(1282);
INSERT INTO t1 (topic) VALUES(1281);
INSERT INTO t1 (topic) VALUES(1280);
INSERT INTO t1 (topic) VALUES(1279);
INSERT INTO t1 (topic) VALUES(1278);
