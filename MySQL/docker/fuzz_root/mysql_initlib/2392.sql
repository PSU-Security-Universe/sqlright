CREATE TABLE t1(a int, b VARCHAR(5), PRIMARY KEY(a))ENGINE=INNODB;
INSERT INTO t1 VALUES (1, 'a'), (2, 'ab'), (3, 'abc'), (4, 'abcd'), (5, 'abcde');
ALTER TABLE t1 ADD KEY k2 (b(4));
ANALYZE TABLE t1;
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcd%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc\%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%abc%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '____%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\_\_\_\_%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%\%\%\%';
EXPLAIN SELECT b LIKE 'abcd' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE 'abc%' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\\\%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a_';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%a';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%c%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%c';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcde%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcde%';
EXPLAIN SELECT b FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE 'abcde' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE '%bc' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaaa\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%' OR b like '%a';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 IGNORE INDEX(k2) WHERE b like 'a%';
DROP TABLE t1;
CREATE TABLE t1(a int, b VARCHAR(5), PRIMARY KEY(a))ENGINE=INNODB  DEFAULT CHARSET=latin1;
INSERT INTO t1 VALUES (1, 'a'), (2, 'ab'), (3, 'abc'), (4, 'abcd'), (5, 'abcde');
ALTER TABLE t1 ADD KEY k2 (b(4));
ANALYZE TABLE t1;
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcd%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc\%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%abc%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '____%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\_\_\_\_%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%\%\%\%';
EXPLAIN SELECT b LIKE 'abcd' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE 'abc%' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\\\%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a_';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%a';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%c%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%c';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcde%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcde%';
EXPLAIN SELECT b FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE 'abcde' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE '%bc' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaaa\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%' OR b like '%a';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 IGNORE INDEX(k2) WHERE b like 'a%';
DROP TABLE t1;
CREATE TABLE t1(a int, b VARCHAR(5), PRIMARY KEY(a))ENGINE=INNODB  DEFAULT CHARSET=utf32;
INSERT INTO t1 VALUES (1, 'a'), (2, 'ab'), (3, 'abc'), (4, 'abcd'), (5, 'abcde');
ALTER TABLE t1 ADD KEY k2 (b(4));
ANALYZE TABLE t1;
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcd%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc\%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%abc%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '____%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\_\_\_\_%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%\%\%\%';
EXPLAIN SELECT b LIKE 'abcd' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE 'abc%' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaa\\\\%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a_';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%a';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%c%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%c';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcde%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcde%';
EXPLAIN SELECT b FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE 'abcde' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b LIKE '%bc' FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'aaaa\\';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%' OR b like '%a';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT b FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 IGNORE INDEX(k2) WHERE b like 'a%';
DROP TABLE t1;
CREATE TABLE t1(a int, b TEXT, PRIMARY KEY(a))ENGINE=INNODB;
INSERT INTO t1 VALUES (1, 'a'), (2, 'ab'), (3, 'abc'), (4, 'abcd'), (5, 'abcde');
ALTER TABLE t1 ADD KEY k2 (b(4));
ANALYZE TABLE t1;
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'a%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'ab%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abcd%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc\%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '\%abc%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like 'abc%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '%%';
EXPLAIN SELECT COUNT(*) FROM t1 WHERE b like '____%';
