drop table if exists t1,t2;
create table t1 (a int not null auto_increment primary key);
insert into t1 values(0);
lock table t1 read;
flush table t1;
unlock tables;
lock table t1 write;
flush table t1;
check table t1;
unlock tables;
lock table t1 write;
lock table t1 read;
flush table t1;
select * from t1;
unlock tables;
unlock tables;
lock table t1 write;
lock table t1 write;
flush table t1;
select * from t1;
unlock tables;
unlock tables;
select * from t1;
drop table t1;
create table t1(table_id char(20) primary key);
create table t2(table_id char(20) primary key);
insert into t1 values ('test.t1');
insert into t1 values ('');
insert into t2 values ('test.t2');
insert into t2 values ('');
handler t1 open as a1;
handler t1 open as a2;
handler t2 open;
handler a1 read first limit 9;
handler a2 read first limit 9;
handler t2 read first limit 9;
flush tables;
handler a1 read first limit 9;
handler a2 read first limit 9;
handler t2 read first limit 9;
handler t1 open as a1;
handler t1 open as a2;
handler t2 open;
handler a1 read first limit 9;
handler a2 read first limit 9;
handler t2 read first limit 9;
flush table t1;
handler a1 read first limit 9;
handler a2 read first limit 9;
handler t2 read first limit 9;
flush table t2;
handler t2 close;
drop table t1;
drop table t2;
create table t1(table_id char(20) primary key);
insert into t1 values ('Record-01');
insert into t1 values ('Record-02');
insert into t1 values ('Record-03');
insert into t1 values ('Record-04');
insert into t1 values ('Record-05');
handler t1 open;
handler t1 read first limit 1;
handler t1 read next limit 1;
handler t1 read next limit 1;
flush table t1;
handler t1 read next limit 1;
handler t1 read next limit 1;
handler t1 close;
drop table t1;
FLUSH TABLES WITH READ LOCK ;
FLUSH TABLES WITH READ LOCK ;
UNLOCK TABLES;
SET @old_innodb_file_per_table= @@GLOBAL.innodb_file_per_table;
SET GLOBAL innodb_file_per_table= 1;
SET @export = 10;
CREATE PROCEDURE p1(export INT) BEGIN END;
DROP PROCEDURE p1;
DROP PROCEDURE p1;
CREATE PROCEDURE export() BEGIN END;
DROP PROCEDURE export;
FLUSH TABLES FOR EXPORT;
FLUSH TABLES WITH EXPORT;
CREATE TABLE t1 (i INT) engine=InnoDB;
CREATE TABLE t2 LIKE t1;
FLUSH TABLES t1, t2 FOR EXPORT;
UNLOCK TABLES;
FLUSH TABLES t1, t2 for ExPoRt;
UNLOCK TABLES;
FLUSH LOCAL TABLES t1, t2 FOR EXPORT;
UNLOCK TABLES;
FLUSH LOCAL TABLES test.t1, test.t2 for ExPoRt;
UNLOCK TABLES;
DROP TABLES t1, t2;
CREATE TABLE export (i INT) engine=InnoDB;
FLUSH TABLE export FOR EXPORT;
UNLOCK TABLES;
DROP TABLE export;
CREATE VIEW v1 AS SELECT 1;
CREATE TEMPORARY TABLE t1 (a INT);
FLUSH TABLES v1 FOR EXPORT;
FLUSH TABLES t1 FOR EXPORT;
FLUSH TABLES non_existent FOR EXPORT;
DROP TEMPORARY TABLE t1;
DROP VIEW v1;
CREATE TABLE t1 (a INT PRIMARY KEY, b INT) engine= InnoDB;
CREATE TABLE t2 (a INT) engine= InnoDB;
START TRANSACTION;
INSERT INTO t1 VALUES (1, 1);
FLUSH TABLES t1 FOR EXPORT;
COMMIT;
INSERT INTO t2 VALUES (1);
INSERT INTO t1 VALUES (2, 2);
UNLOCK TABLES;
START TRANSACTION;
SELECT * FROM t1;
FLUSH TABLES t1 FOR EXPORT;
