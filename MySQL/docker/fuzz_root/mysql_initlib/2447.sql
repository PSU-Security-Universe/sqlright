set default_storage_engine=innodb;
SET TIME_ZONE = "+00:00";
SET sql_mode = 'NO_ENGINE_SUBSTITUTION';
CREATE TABLE t1( a BIT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TINYINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a SMALLINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a MEDIUMINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a INT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a BIGINT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a FLOAT DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DECIMAL DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DATE DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TIME DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a YEAR DEFAULT CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a BIT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TINYINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a SMALLINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a MEDIUMINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a INT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a BIGINT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a FLOAT ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DECIMAL ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a DATE ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a TIME ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1( a YEAR ON UPDATE CURRENT_TIMESTAMP(6) );
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NULL, e DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), f DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), g DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), h DATETIME(6) );
SET TIMESTAMP = 1317132668.654321;
SET @old_time_zone = @@TIME_ZONE;
SET TIME_ZONE = "+05:00";
INSERT INTO t1( d, h ) VALUES ( NOW(6), NOW(6) );
SELECT * FROM t1;
SET TIMESTAMP = 611017323.543212;
UPDATE t1 SET d = NOW(6), h = NOW(6);
SELECT * FROM t1;
SET TIME_ZONE = @old_time_zone;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), f INT );
SET TIMESTAMP = 1303197722.534231;
INSERT INTO t1 ( f ) VALUES (1);
SELECT * FROM t1;
SET TIMESTAMP = 1303197798.132435;
UPDATE t1 SET f = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NULL, f DATETIME(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), j INT );
SET TIMESTAMP = 1303197722.534231;
INSERT INTO t1 ( j, a ) VALUES ( 1, 1 );
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b INT, c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), e TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), f TIMESTAMP(6) NOT NULL DEFAULT '1986-09-27 03:00:00.098765', g TIMESTAMP(6) NULL, h DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), j DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), k DATETIME(6) NULL, l DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' );
SET TIMESTAMP = 251593200.192837;
INSERT INTO t1(a) VALUES (1) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
SET TIMESTAMP = 169945200.918273;
INSERT INTO t1(a) VALUES (1) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
SET TIMESTAMP = 114167482.534231;
INSERT INTO t1(a) VALUES (2) ON DUPLICATE KEY UPDATE b = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b INT, c TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6) );
SET TIMESTAMP = 1303197798.945156;
INSERT INTO t1 VALUES (1, 0, '2001-01-01 01:01:01.111111'), (2, 0, '2002-02-02 02:02:02.222222'), (3, 0, '2003-03-03 03:03:03.333333');
SELECT * FROM t1;
UPDATE t1 SET b = 2, c = c WHERE a = 2;
SELECT * FROM t1;
INSERT INTO t1 (a) VALUES (4);
SELECT * FROM t1;
UPDATE t1 SET c = '2004-04-04 04:04:04.444444' WHERE a = 4;
SELECT * FROM t1;
INSERT INTO t1 ( a ) VALUES ( 3 ), ( 5 ) ON DUPLICATE KEY UPDATE b = 3, c = c;
SELECT * FROM t1;
INSERT INTO t1 (a, c) VALUES (4, '2004-04-04 00:00:00.444444'), (6, '2006-06-06 06:06:06.666666') ON DUPLICATE KEY UPDATE b = 4;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a INT PRIMARY KEY, b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), c DATETIME(6)  DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), e DATETIME(6)  DEFAULT CURRENT_TIMESTAMP(6), f TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), g DATETIME(6)  ON UPDATE CURRENT_TIMESTAMP(6), h TIMESTAMP(6) NULL, i DATETIME(6) );
SET TIMESTAMP = 22756272.163584;
REPLACE INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
SET TIMESTAMP = 27094577.852954;
REPLACE INTO t1 ( a ) VALUES ( 1 );
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), c INT );
SET TIMESTAMP = 1303293221.163578;
INSERT INTO t1 VALUES (NULL, NULL, 1), (DEFAULT, DEFAULT, 2);
INSERT INTO t1 ( a, b, c ) VALUES (NULL, NULL, 3), (DEFAULT, DEFAULT, 4);
SELECT * FROM t1;
SET TIME_ZONE = "+03:00";
SELECT * FROM t1;
SET TIME_ZONE = "+00:00";
DROP TABLE t1;
SET TIMESTAMP = 1303283139.195624;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT '2010-10-11 12:34:56' ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT '2010-10-11 12:34:56' );
INSERT INTO t1          VALUES (NULL, NULL), (DEFAULT, DEFAULT);
INSERT INTO t1 ( a, b ) VALUES (NULL, NULL), (DEFAULT, DEFAULT);
SELECT * FROM t1;
DROP TABLE t1;
SET TIMESTAMP = 1303293221.136952;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), c TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), d TIMESTAMP(6) NOT NULL DEFAULT '1986-09-27 03:00:00.098765', e TIMESTAMP(6) NULL, f DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), g DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), h DATETIME(6) ON UPDATE CURRENT_TIMESTAMP(6), i DATETIME(6) NULL, j DATETIME(6) DEFAULT '1986-09-27 03:00:00.098765' );
INSERT INTO t1 VALUES ();
INSERT INTO t1 SELECT NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6), b DATETIME(6) DEFAULT CURRENT_TIMESTAMP(6), c INT );
INSERT INTO t1 ( c ) VALUES (1);
SELECT * FROM t1;
SET TIMESTAMP = 1303311973.163587;
UPDATE t1 t11, t1 t12 SET t11.c = 1;
SELECT * FROM t1;
UPDATE t1 t11, t1 t12 SET t11.c = 2;
SELECT * FROM t1;
DROP TABLE t1;
CREATE TABLE t1 ( a TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6), b TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), c DATETIME(6)  DEFAULT   CURRENT_TIMESTAMP(6), d DATETIME(6)  ON UPDATE CURRENT_TIMESTAMP(6), e INT );
CREATE TABLE t2 ( f INT, g DATETIME(6)  ON UPDATE CURRENT_TIMESTAMP(6), h DATETIME(6)  DEFAULT   CURRENT_TIMESTAMP(6), i TIMESTAMP(6) NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP(6), j TIMESTAMP(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) );
SET TIMESTAMP = 794880123.195676;
INSERT INTO t1 ( e ) VALUES ( 1 ), ( 2 );
INSERT INTO t2 ( f ) VALUES ( 1 ), ( 2 );
SELECT * FROM t1;
SELECT * FROM t2;
SET TIMESTAMP = 345520921.196755;
UPDATE t1, t2 SET t1.e = 3, t2.f = 4;
